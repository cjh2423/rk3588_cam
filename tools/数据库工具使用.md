# 数据库运维工具 (db_tool) 使用说明

`db_tool` 是一个独立的命令行工具，用于在没有图形界面的情况下对人脸识别系统的数据库进行初始化、人员管理和数据统计。

## 🛠️ 编译说明

该工具位于 `tools/db_tool` 目录下，采用独立编译模式。为了方便使用，提供了一键编译脚本。

```bash
cd tools/db_tool
./build.sh
```

编译完成后，可执行文件位于 `tools/db_tool/build/db_tool`。

## 📖 指令列表

### 1. 初始化数据库
创建一个包含所有必要表结构（users, face_features, attendance_records）的新数据库文件。
```bash
./db_tool init <db_path>
# 示例
./db_tool init ./data.db
```

### 2. 添加用户
手动向数据库添加人员基本信息。
```bash
./db_tool add_user <db_path> <用户名> <部门>
# 示例
./db_tool add_user ./data.db "张三" "研发部"
```

### 3. 查看用户列表
列出数据库中所有处于“启用”状态的用户。
```bash
./db_tool list_users <db_path>
# 示例
./db_tool list_users ./data.db
```

### 4. 统计信息
快速查看数据库中的关键数据指标（如总人数等）。
```bash
./db_tool stats <db_path>
```

---

## 📌 注意事项
1. **数据库路径**: 请确保主程序 `cam_demo` 运行时使用的数据库文件路径与 `db_tool` 操作的是同一个。
2. **人脸特征**: `db_tool` 目前仅支持管理人员基本信息。人脸特征（512维向量）通常建议通过 GUI 注册界面或专门的批量导入脚本进行录入。
